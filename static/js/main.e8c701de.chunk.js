(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{37:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a.n(c),n=a(28),l=a.n(n),r=(a(37),a(29)),o=a(2);var j=Object(c.createContext)(),d=a(1);var i=e=>{const t=Object(c.useContext)(j);let a=Object(o.f)();return Object(d.jsx)("div",{className:"deptNameField",children:Object(d.jsxs)("p",{onClick:()=>{t.getObjectsOfDepartment(e.obj.departmentId,e.obj.displayName),a.push("/search")},className:"deptName",children:["~ ",e.obj.displayName]})})};const b=()=>Object(d.jsx)("div",{className:"bg-yellow",children:Object(d.jsx)("div",{className:"loading-page",children:Object(d.jsx)("p",{className:"loading-text",children:"Loading..."})})});var m=a(9);const p=e=>{let{title:t,style:a}=e;return Object(c.useContext)(j).loading?"":Object(d.jsxs)("nav",{className:"navbar",children:[Object(d.jsx)(m.b,{to:"/",children:Object(d.jsx)("p",{children:t})}),Object(d.jsxs)("ul",{className:"nav-flex",children:[Object(d.jsx)("li",{children:Object(d.jsx)(m.b,{to:"/choosedept",children:"Departments"})}),Object(d.jsx)("li",{children:Object(d.jsx)(m.b,{to:"/about",children:"About"})})]})]})};p.defaultProps={title:"Discover the Met Museum"};var h=p;var O=()=>{const e=Object(c.useContext)(j),{loading:t,departments:a}=e,[s,n]=Object(c.useState)([]);return Object(c.useEffect)((()=>{t||(JSON.parse(localStorage.getItem("deptInfo"))?n(JSON.parse(localStorage.getItem("deptInfo"))):e.searchAllDepartments())}),[]),t?Object(d.jsx)(b,{}):Object(d.jsxs)("div",{className:"home",children:[Object(d.jsx)(h,{}),Object(d.jsxs)("div",{className:"deptFlex",children:[Object(d.jsx)("h1",{className:"landing-page-heading",children:"Choose a department to begin the tour"}),Object(d.jsx)("div",{className:"deptColFlex",children:0!=s.length?s.map((e=>Object(d.jsx)(i,{obj:e},e.departmentId))):a.map((e=>Object(d.jsx)(i,{obj:e},e.departmentId)))})]})]})};var x=()=>Object(d.jsx)(c.Fragment,{children:Object(d.jsx)(O,{})});var g=()=>Object(d.jsxs)("div",{className:"bg-color",children:[Object(d.jsx)(h,{}),Object(d.jsxs)("div",{className:"about",children:[Object(d.jsx)("h1",{children:"About"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("p",{children:"View the art from Met Museum of New York."}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{children:"Developed by Arsalan Uddin using React, react-gallery-carousel and the met collection API."}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{children:"Version 1.0.0"})]})]})]}),u=a(11),v=a.n(u);const N="SEARCH_DEPARTMENTS",I="GET_OBJECTS",f="CLEAR_OBJECTS",y="SET_LOADING";var S=(e,t)=>{switch(t.type){case N:return{...e,departments:t.payload.departments,loading:!1};case f:return{...e,departments:[],objectID:[],loading:!1};case y:return{...e,loading:!0};case I:var a=t.payload.objectIDs.slice(0,10);return localStorage.setItem("objId",JSON.stringify(a)),{...e,department:t.name,objectID:a,loading:!1};default:return e}};var D=e=>{const[t,a]=Object(c.useReducer)(S,{departments:[],objectID:[],department:"",loading:!1}),s=()=>a({type:y});return Object(d.jsx)(j.Provider,{value:{departments:t.departments,objectID:t.objectID,loading:t.loading,department:t.department,searchAllDepartments:async()=>{s();const e=await v.a.get("https://collectionapi.metmuseum.org/public/collection/v1/departments");localStorage.setItem("deptInfo",JSON.stringify(e.data.departments)),a({type:N,payload:e.data})},clearObjects:()=>a({type:f}),getObjectsOfDepartment:async(e,t)=>{s();const c=await v.a.get("https://collectionapi.metmuseum.org/public/collection/v1/search?departmentId=".concat(e,"&q=").concat(t,"&hasImages=true"));localStorage.setItem("deptName",JSON.stringify(t)),a({type:I,payload:c.data,name:t})}},children:e.children})};var C=()=>Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Page not found"}),Object(d.jsx)("p",{className:"lead",children:"The page you are looking for doesn't exist"})]}),E=a(32);a(69);var w=function(){const e=v.a.CancelToken.source(),t=Object(c.useContext)(j);var{objectID:a}=t;const[s,n]=Object(c.useState)([]),[l,r]=Object(c.useState)([]),[o,i]=Object(c.useState)(!0),[m,p]=Object(c.useState)([]),O=Object(c.useRef)(null),x=()=>{O.current.maximize(),O.current.play()};return Object(c.useEffect)((()=>{JSON.parse(localStorage.getItem("objId"))&&r(JSON.parse(localStorage.getItem("objId"))),JSON.parse(localStorage.getItem("deptName"))&&p(JSON.parse(localStorage.getItem("deptName")))}),[]),Object(c.useEffect)((()=>{if(0==a.length&&(a=l),a&&a.length>0&&s.length<=0){let t=[];i(!0);for(let c=0;c<a.length;c++)t.push(v.a.get("https://collectionapi.metmuseum.org/public/collection/v1/objects/".concat(a[c]),{cancelToken:e.token}).then((e=>{if(""!==e.data.primaryImage){let t={src:e.data.primaryImage,alt:e.data.title};n((e=>[...e,t]))}})));Promise.allSettled(t).then((()=>{i(!1)}))}return()=>{e.cancel(),i(!1)}}),[l,a]),Object(c.useEffect)((()=>()=>{t.clearObjects(),localStorage.removeItem("objId"),localStorage.removeItem("deptName")}),[]),!t.loading&&a&&s.length>0&&!o?Object(d.jsxs)("div",{className:"bg-yellow",children:[Object(d.jsx)(h,{}),Object(d.jsx)("h1",{className:"deptHeading",children:t.department?t.department:m}),Object(d.jsxs)("p",{className:"text-content",children:["~ For an immersive experience ",Object(d.jsx)("span",{className:"text-content p-link",onClick:x,children:"click here"})]}),Object(d.jsx)("div",{className:"carousel-container",children:Object(d.jsx)(E.a,{ref:O,images:s,autoPlayInterval:5e3,hasCaptions:"top",hasIndexBoard:!1,hasThumbnails:!1})})]}):t.loading||!a||0!==s.length||o?Object(d.jsx)(b,{}):Object(d.jsxs)("div",{className:"bg-yellow vh-style",children:[Object(d.jsx)(h,{}),Object(d.jsx)("h1",{className:"deptHeading",children:t.department?t.department:m}),Object(d.jsx)("p",{className:"text-content",children:"No images are available for this department"})]})};var J=()=>Object(d.jsxs)("div",{className:"home-landing",children:[Object(d.jsx)("h1",{className:"landing-page-heading home-heading",children:"Welcome to the Meteropolitan Museum of New York"}),Object(d.jsx)(m.b,{to:"/choosedept",children:Object(d.jsx)("button",{children:"Begin Tour"})})]});var k=()=>(Object(c.useEffect)((()=>()=>{localStorage.removeItem("objId"),localStorage.removeItem("deptName")}),[]),Object(d.jsx)(D,{children:Object(d.jsx)(m.a,{children:Object(d.jsx)("div",{className:"App",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)(r.a,{atEnter:{opacity:0},atLeave:{opacity:0},atActive:{opacity:1},className:"switch-wrapper",children:[Object(d.jsx)(o.a,{path:"/",exact:!0,component:J}),Object(d.jsx)(o.a,{exact:!0,path:"/choosedept",component:x}),Object(d.jsx)(o.a,{exact:!0,path:"/about",component:g}),Object(d.jsx)(o.a,{exact:!0,path:"/search",component:w}),Object(d.jsx)(o.a,{component:C})]})})})})}));l.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(k,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.e8c701de.chunk.js.map